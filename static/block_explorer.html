{{if .BlockId}}
	<style>
		.thead {
			width:120px;
			font-weight:bold;
			white-space:nowrap;
		}
	</style>
	
	<script>
		$(".aside .nav li").removeClass("active");
		$(".anonym").addClass("active");
		
//		$( "#dl_modal" ).load( "content?controllerHTML=modal_anonym", { }, function() {});
		
		// Font Awesome support
		$.fn.editableform.buttons =
		  '<button type="submit" class="btn btn-primary btn-sm editable-submit">'+
			'<i class="fa fa-fw fa-check"></i>'+
		  '</button>'+
		  '<button type="button" class="btn btn-default btn-sm editable-cancel">'+
			'<i class="fa fa-fw fa-times"></i>'+
		  '</button>';
		  
	</script>
	
	<div class="content-heading">
	   Anonym
	</div>
	<ol class="breadcrumb">
	   <li><a href="#" onclick="dl_navigate0('dashboardAnonym')">Dashboard</a></li>
	   <li class="active">Block Information</li>
	</ol>
	<!-- START panel-->
	<div class="panel panel-default">
	 <div class="panel-body">
		<div class="table-responsive">
		   <table class="table table-striped table-bordered table-hover">
			  <tbody>
				 <tr>
					<td class="thead">Block ID</td>
					<td><strong><a class="edit" href="#" data-type="text" data-pk="1" data-title="Enter block ID for search">{{.BlockId}}</a></strong></td>
				 </tr>
				{{if .BlockData}}
				 <tr>
					<td class="thead">Time</td>
					<td>{{.BlockData.time}}</td>
				 </tr>
				 <tr>
					<td class="thead">Hash</td>
					<td>{{.BlockData.hash}}</td>
				 </tr>
				{{if gt .BlockId 1}}
				 <tr>
					<td class="thead">Parent Hash:</td>
					<td><a onclick="return prev_block()" >{{.BlockData.parent}}</a></td>
				 </tr>
				{{end}}
				 <tr>
					<td class="thead">Central Bank ID</td>
					<td>{{.BlockData.cb_id}}</td>
				 </tr>
				 <tr>
					<td class="thead">Wallet ID</td>
					<td>{{.BlockData.wallet_id}}</td>
				 </tr>
				 <tr>
					<td class="thead">Transactions</td>
					<td>{{.BlockData.tx}}</td>
				 </tr>
				 <tr>
					<td class="thead">Size</td>
					<td>{{.BlockData.size}} bytes</td>
				 </tr>
				 <tr>
					<td class="thead">Data</td>
					<td>{{.BlockData.data}}</td>
				 </tr>
				{{else}}
				 <tr>
					<td class="thead" colspan="2">Block doesn't exist.</td>
				 </tr>
				
				{{end}}
			  </tbody>
		   </table>
		</div>
	 </div>
	 <div class="panel-footer">
	   <div class="clearfix">
		  <div class="pull-left">
			{{if gt .BlockId 1}}
			 <a href="#" onclick="return prev_block()" class="btn btn-primary"><span class="fa fa-angle-left"></span> &nbsp; Prev Block</a>
			{{end}}
		  </div>
		  <div class="pull-right">
			 <a href="#" onclick="return next_block()" class="btn btn-primary">Next Block &nbsp; <span class="fa fa-angle-right"></span></a>
		  </div>
	   </div>
	  </div>
	</div>
	<!-- END panel-->
{{else}}
	   <!-- START table responsive-->
	   <div class="table-responsive">
		   <table id="block_explorer" class="table table-striped table-bordered table-hover">
			  <thead>
				 <tr>
					<th>Block ID</th>
					<th>Hash</th>
					<th>Time</th>
					<th>Central Bank ID</th>
					<th>Wallet ID</th>
					<th>Transactions</th>
				 </tr>
			  </thead>
			  <tbody>
				{{range .List}}
			  	 <tr>
				 	<td><a href="" onclick="return block_detail({{.id}})">{{.id}}</a></td>
					<td>{{.hash}}</td>
					<td class="unixtime">{{.time}}</td>
					<td>{{.cb_id}}</td>
					<td>{{.wallet_id}}</td>
					<td>{{.tx}}</td>
				 </tr>
				{{end}}
			  </tbody>
		   </table>
	   </div>
	   <!-- END table responsive-->
{{end}}
<script type="text/javascript">
	function addRow(n) {
		var id = $("#block_explorer tbody");
		var el = '<tr class="addRow"><td><a href="#">123</a></td><td>43b19de006038337df61209a0226a531018cbbea4ff3c54a8e452db60ae54468</td><td class="unixtime">30.08.2016, 16:02:45</td><td>0</td><td>0</td><td>["4"]</td></tr>';
				 
		for (var i = 1; i <= n; i++) {
			id.prepend(el);
		}
	}

	function block_detail( id ) {
	    $("#dl_content").load( "content?page=blockExplorer", { blockId: id }, function() {});
		return false
	}

{{if .BlockId}}
	function prev_block() {
		return block_detail( {{.BlockId}} - 1 );
	}

	function next_block() {
		return block_detail( {{.BlockId}} + 1 );
	}
	
	$(document).ready(function() {
		$(".edit").editable({
            type: 'text',
		    success: function(response, newValue) {
				block_detail( parseInt(newValue));
    		}
		})
	});
{{else}}	
	var latestBlock = {{.Latest}};
	var  latestTime;
	
	function block_reload() {
		$.post("content?page=block_explorer", {latest: latestBlock},
        function(data) {
			if ($("#tab2").css('display') == 'none') {
				return;
			}
			if (data) {
				clearTimeout(latestTime);
	            $('#tab2').html( data );
			} else
				latestTime = setTimeout( block_reload, 2000 );
    	}, "html");
//		$("#dl_content").load( "content?page=blockExplorer", { latest: latestBlock }, function() {
	}
	
	latestTime = setTimeout( block_reload, 2000 );
{{end}}	
	$(document).ready( unixtime );
</script>
