<script language="JavaScript" type="text/javascript">
	function SendTxOK{{.Unique}}() {
		preloader_hide();
        if (hist.length > hist_cur) {
            hist_go(hist[hist_cur]);
        }
	}
	var serverTime{{.Unique}};
	var predata{{.Unique}};
	function prepare_btncontract( contract, params ) {
		predata{{.Unique}} = {
			'TxName' : contract,
		};
        for (var prop in params) {
			predata{{$.Unique}}[prop] = params[prop];
        }
		prepare_contract(predata{{.Unique}}, {{$.Unique}}, sendnet{{$.Unique}});
	}

function sendnet{{.Unique}}() {
	predata{{.Unique}}['public'] = GKey.Public;
	$.ajax({
		type: 'POST',
		url: 'ajax?json=ajax_send_tx',
		data: predata{{.Unique}},
		dataType: 'json',
		crossDomain: true,
		success: function(result) {
			result.type_success = 'notification';
			send_to_net_success(result, SendTxOK{{.Unique}}, true );
		},
		error: function(xhr, status, error) {
			Alert("Error", error, "error");
		}
	});
}

function btn_contract(obj, contract, params, text) {
    console.log(contract, params, text);
    preloader(obj);    
    Alert(text, contract, "success:cancel", function(){
        prepare_btncontract( contract, params );
    });
}
</script>
{{template "signatures".}}