<style>
	#message {
		display:none;
	}
	#refresh {
		visibility:hidden;
		position:absolute;
		left:-100000px;
		top:-100000px;
	}
</style>

<script>
	$(".aside .nav li").removeClass("active");
	$(".anonym, .anonym_citizen_status").addClass("active");
	
//	$( "#dl_modal" ).load( "content?controllerHTML=modal_anonym", { }, function() {});
	
	$('#datetimepicker1').datetimepicker({
	  icons: {
		  time: 'fa fa-clock-o',
		  date: 'fa fa-calendar',
		  up: 'fa fa-chevron-up',
		  down: 'fa fa-chevron-down',
		  previous: 'fa fa-chevron-left',
		  next: 'fa fa-chevron-right',
		  today: 'fa fa-crosshairs',
		  clear: 'fa fa-trash'
		},
		minDate: moment("01/01/1950"),
		maxDate: 'now',
		format: 'DD MMMM, YYYY'
	});
	$('.filestyle').filestyle();
	$('#countries').select2({
		theme: 'bootstrap'
	});
	
	var container = $("#fields");
	var msg = $("#message");
	
	function Country(id) {
		if (!id) {
			id = 1;
		}
		
		container.html("");
		$("#refresh").click();
		
		$.get( 'ajax?json=ajax_citizen_fields',{state_id: id}, function(data) {
			$('[data-sweet-alert]').removeClass("whirl standard");
			if (data.fields.length) {
				var fields = JSON.parse(data.fields);
				if (fields[0].htmlType == "textinput") {
					el = '<div class="form-group"><label for="' + fields[0].name + '">Name</label><input id="' + fields[0].name + '" name="' + fields[0].name + '" type="text" class="form-control"></div>'
				}
				container.append(el);
			}
		},'json')
	}
	
	function changeCountry(elem) {
		var id = elem.value;
		if (id != "1") {
			msg.show();
			container.html("");
		} else {
			msg.hide();
			Country(id);
		}
	}
	
	Country();
	// Example of ajax_citizen_fields
	/*$.get( 'ajax?json=ajax_citizen_fields',{state_id: 1}, function(data) {
		console.log(data);
		if (data.fields.length) {
			var fields = JSON.parse(data.data);
			alert(fields[0].name +', ' + fields[0].title + ', ' + 
			fields[0].txType +', ' + fields[0].htmlType	 );
			console.log( fields );
		}
	},'json')*/
</script>

<div class="content-heading">
   Request for citizen status
</div>
<ol class="breadcrumb">
   <li><a href="#" onclick="dl_navigate0('dashboardAnonym')">Dashboard</a></li>
   <li class="active">Request for citizen status</li>
</ol>
<!-- START panel-->
<div class="panel panel-default" data-sweet-alert>
 <div class="panel-body">
	<form role="form">
	   <div class="form-group">
		  <label for="price">Price</label>
		  <input id="price" type="text" class="form-control" value="10 DLT" disabled>
	   </div>
	   <div id="fields"></div>
	   <!--<div class="form-group">
		  <label>Name</label>
		  <input type="text" class="form-control">
	   </div>
	   <div class="form-group">
		  <label>Surname</label>
		  <input type="text" class="form-control">
	   </div>
	   <div class="form-group">
		  <label>Birthday</label>
		  <div id="datetimepicker1" class="input-group date">
			 <input type="text" class="form-control">
			 <span class="input-group-addon">
				<span class="fa fa-calendar"></span>
			 </span>
		  </div>
	   </div>
	   <div class="form-group">
		  <label>Photo</label>
		  <input type="file" data-classbutton="btn btn-default" data-classinput="form-control inline" class="form-control filestyle">
	   </div>
	   <div class="form-group">
		  <label>Passport number</label>
		  <input type="text" class="form-control">
	   </div>-->
	   <div class="form-group">
		  <label for="countries">Country</label>
		  <select id="countries" class="form-control" onChange="changeCountry(this);">
			 <option value="1">DayLight</option>
			 <option value="AL">Alabama</option>
			 <option value="AR">Arkansas</option>
			 <option value="IL">Illinois</option>
			 <option value="IA">Iowa</option>
			 <option value="KS">Kansas</option>
			 <option value="KY">Kentucky</option>
			 <option value="LA">Louisiana</option>
			 <option value="MN">Minnesota</option>
			 <option value="MS">Mississippi</option>
			 <option value="MO">Missouri</option>
			 <option value="OK">Oklahoma</option>
			 <option value="SD">South Dakota</option>
			 <option value="TX">Texas</option>
			 <option value="TN">Tennessee</option>
			 <option value="WI">Wisconsin</option>
		  </select>
	   </div>
	   <div id="message" class="alert alert-danger">At this point in your chosen country, the Central Bank has not yet begun to register citizens in DayLight. If the Central Bank does not begin to citizens registered to 03.01.2017,  then these powers led association of CB will be transferred.</div>
	</form>
 </div>
 <div class="panel-footer">
   <div class="clearfix">
	  <div class="pull-right">
		 <button type="button" class="btn btn-primary">Request</button>
		 <button id="refresh" type="button" data-tool="panel-refresh" onClick="preloader(this);"></button>
	  </div>
   </div>
  </div>
</div>
<!-- END panel-->