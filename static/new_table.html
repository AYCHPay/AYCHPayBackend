{{ define "newTable" }}
	<style>
		th {
			cursor:move;
		}
	</style>
	
	<script>
		$(".aside .nav li").removeClass("active");
		$(".citizen, .citizen_form").addClass("active");
		
		/*$.fn.editable.defaults.mode = 'inline';
		$.fn.editableform.buttons =
		  '<button type="submit" class="btn btn-primary btn-sm editable-submit">'+
			'<i class="fa fa-fw fa-check"></i>'+
		  '</button>'+
		  '<button type="button" class="btn btn-default btn-sm editable-cancel">'+
			'<i class="fa fa-fw fa-times"></i>'+
		  '</button>';
		
		var table = $("#table");
		var el = $("#table tr");
		var table_init;
		
		$("#add").on('click', function(){
			$("body").click();
			table_init.destroy();
			el.each(function() {
				var col = $(this).find("th:last, td:last").clone();
				$(this).append(col);
			});
			InitTable();
		})
		$("#remove").on('click', function(){
			table_init.destroy();
			el.each(function() {
				var col = $(this).children("th, td").length;
				if (col > 1) {
					$(this).find("th:last, td:last").remove();
				} else {
					return false;
				}
			});
			InitTable();
		})
		
		function InitTable() {
			table_init = table.DataTable({
				destroy: true,
				colReorder: true,
				paging:   false,
				ordering: false,
				searching: false,
				info:     false
			});
			$(".edit").editable({
				type: 'text'
			})
		}
		
		InitTable();*/
		
		var columns = [];
		var table = $("#table tbody");
		
		function NewColumn() {
			var col = '<tr>' +
						 '<td><input class="colname form-control" type="text" placeholder="colname" value=""></td>' +
						 '<td width="50"><button type="button" class="btn btn-primary" onClick="RemoveColumn(this);">(-)</button></td>' +
					   '</tr>';
			table.append(col);
			$(".colname:last").focus();
		}
		
		function RemoveColumn(elem) {
			$(elem).parents("tr").remove();
		}
		
		NewColumn();
		
		$('#send').bind('click', function () {
			columns = [];
			$(".colname").each(function() {
				var val = $(this).val();
				columns.push(val);
			});
			
			serverTime = data.time;
			$("#for-signature").val( '{{.TxTypeId}},'+serverTime+',{{.Data.WalletId}}');
			doSign();
			
			$("#send_to_net").trigger("click");
		});
	
		$('#send_to_net').bind('click', function () {
			$.ajax({
				type: 'POST',
				url: 'ajax?controllerName=saveQueue',
				data: {
					'tableName' : $("#tableName").val(),
					'columns' : columns,
					'type' : '{{.TxType}}',
					'time' : serverTime,
					'citizenId' : '{{.CitizenId}}',
					'stateId' : '{{.StateId}}',
					'signature1': $('#signature1').val(),
					'signature2': $('#signature2').val(),
					'signature3': $('#signature3').val()
				},
				dataType: 'json',
				crossDomain: true,
				success: function(data) { send_to_net_success(data) },
				error: function(xhr, status, error) {
					Alert("Error", error, "error");
				}
			});
		} );
	</script>
	
	<div class="content-heading">
		citizen_form
	</div>
	<ol class="breadcrumb">
	   <li><a href="#">Dashboard</a></li>
	   <li class="active">citizen_form</li>
	</ol>
	<!-- START panel-->
	<div class="panel panel-default">
	 <div class="panel-heading">
	 	<div class="panel-title">
			<input id="tableName" class="form-control" type="text" value="" placeholder="Table name">
		</div>
	 </div>
	 <div class="panel-body">
		 <div class="table-responsive">
		   <table id="table" class="table table-striped table-bordered table-hover">
			  <tbody></tbody>
		   </table>
		</div>
	 </div>
	 <div class="panel-footer">
	   <div class="clearfix">
		  <div class="pull-left">
			 <button type="button" id="add" class="btn btn-primary" onClick="NewColumn();">Add column</button>
		  </div>
		  <div class="pull-right">
			 <button type="button" id="send" class="btn btn-primary">Send</button>
		  </div>
	   </div>
	  </div>
	</div>
	<!-- END panel-->
	
	{{template "signatures".}}
	
{{end}}