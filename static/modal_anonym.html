{{define "modalAnonym"}}

<script>
	var interval;
	var serverTime;
	
	clearInterval(interval);
	
	$('#next').bind('click', function () {
		$.get( 'ajax?controllerName=GetServerTime', function (data) {
			serverTime = data.time;
			$("#for-signature").val( '{{.TxTypeId}},'+serverTime+',{{.WalletId}},'+$('#host').val()+','+$('#vote').val() );
			doSign();
			$("#send_to_net").trigger("click");
		}, "json" );
	} );

	$('#send_to_net').bind('click', function () {
		$.ajax({
			type: 'POST',
			url: 'ajax?controllerName=saveQueue',
			data: {
				'type' : '{{.TxType}}',
				'time' : serverTime,
				'walletId' : '{{.WalletId}}',
				'host' : $('#host').val(),
				'vote' : $('#vote').val(),
				'publicKey' : $('#vote').val(),
				'n' : e_n_sign['modulus'],
				'e': e_n_sign['exp'],
				'signature1': $('#signature1').val(),
				'signature2': $('#signature2').val(),
				'signature3': $('#signature3').val()
			},
			dataType: 'json',
			crossDomain: true,
			success: function(data) { send_to_net_success(data) },
			error: function(xhr, status, error) {
				Alert("Error", error, "error");
			}
		});
	} );

$(document).ready(function() {
	var clipboard = new Clipboard("#clipboard");

	clipboard.on('success', function(e) {
		e.clearSelection();
		//clipboard.destroy();
		Alert("Success", "", "success");
	});
	
	$('#modal_citizen_status').on('shown.bs.modal', function (e) {
		$('#datetimepicker1').datetimepicker({
		  icons: {
			  time: 'fa fa-clock-o',
			  date: 'fa fa-calendar',
			  up: 'fa fa-chevron-up',
			  down: 'fa fa-chevron-down',
			  previous: 'fa fa-chevron-left',
			  next: 'fa fa-chevron-right',
			  today: 'fa fa-crosshairs',
			  clear: 'fa fa-trash'
			},
			minDate: moment("01/01/1950"),
			maxDate: 'now',
			format: 'DD MMMM, YYYY'
		});
		$('.filestyle').filestyle();
		$('#select2-1').select2({
			theme: 'bootstrap'
		});
	})
});
</script>
<div class="modal fade" id="modal_wallet_address" role="dialog" aria-labelledby="modal_wallet_address_label">
	<div class="modal-dialog" role="document">
		<div class="modal-content" data-sweet-alert>
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title" id="modal_wallet_address_label">Wallet address</h4>
			</div>
			<div class="modal-body">
				<center><img src="static/img/QR.png" alt=""></center>
				<div class="well" style="margin-bottom:0px; margin-top:15px; text-align:center; background-color:#f5f5f5;">{{.MyWalletData.address}}</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				<button id="clipboard" type="button" class="btn btn-primary" data-clipboard-action="copy" data-clipboard-text="{{.MyWalletData.address}}" onClick="preloader(this);">Copy to clipboard</button>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" id="modal_citizen_status" role="dialog" aria-labelledby="modal_citizen_status_label">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title" id="modal_citizen_status_label">Request for citizen status</h4>
			</div>
			<div class="modal-body">
				<form role="form">
				   <div class="form-group">
					  <label>Price</label>
					  <input type="text" class="form-control" value="10 DLT" disabled>
				   </div>
				   <div class="form-group">
					  <label>Name</label>
					  <input type="text" class="form-control">
				   </div>
				   <div class="form-group">
					  <label>Surname</label>
					  <input type="text" class="form-control">
				   </div>
				   <div class="form-group">
					  <label>Birthday</label>
					  <div id="datetimepicker1" class="input-group date">
						 <input type="text" class="form-control">
						 <span class="input-group-addon">
							<span class="fa fa-calendar"></span>
						 </span>
					  </div>
				   </div>
				   <div class="form-group">
					  <label>Photo</label>
					  <input type="file" data-classbutton="btn btn-default" data-classinput="form-control inline" class="form-control filestyle">
				   </div>
				   <div class="form-group">
					  <label>Passport number</label>
					  <input type="text" class="form-control">
				   </div>
				   <div class="form-group">
					  <label>Country</label>
					  <select id="select2-1" class="form-control">
						 <option value="DL">DayLight</option>
						 <option value="AL">Alabama</option>
						 <option value="AR">Arkansas</option>
						 <option value="IL">Illinois</option>
						 <option value="IA">Iowa</option>
						 <option value="KS">Kansas</option>
						 <option value="KY">Kentucky</option>
						 <option value="LA">Louisiana</option>
						 <option value="MN">Minnesota</option>
						 <option value="MS">Mississippi</option>
						 <option value="MO">Missouri</option>
						 <option value="OK">Oklahoma</option>
						 <option value="SD">South Dakota</option>
						 <option value="TX">Texas</option>
						 <option value="TN">Tennessee</option>
						 <option value="WI">Wisconsin</option>
					  </select>
				   </div>
				   <div class="alert alert-danger">At this point in your chosen country, the Central Bank has not yet begun to register citizens in DayLight. If the Central Bank does not begin to citizens registered to 03.01.2017,  then these powers led association of CB will be transferred.</div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				<button type="button" class="btn btn-primary">Request</button>
			</div>
		</div>
	</div>
</div>
<div class="modal fade" id="modal_block_generation" role="dialog" aria-labelledby="modal_block_generation_label">
	<div class="modal-dialog" role="document">
		<div class="modal-content panel" data-sweet-alert>
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title" id="modal_block_generation_label">Block generation</h4>
			</div>
			<div class="modal-body">
				<form role="form">
				   <div class="form-group">
					  <label>Ipv4</label>
					  <input type="text" class="form-control" value="{{.MyWalletData.host}}" id="host">
				   </div>
				   <div class="form-group">
					  <label>The address for which the vote</label>
					  <input type="text" class="form-control" value="{{.MyWalletData.vote}}" id="vote">
				   </div>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				<button type="button" class="btn btn-primary" data-tool="panel-refresh" data-toggle="tooltip" data-spinner="standard" onClick="preloader(this);" id="next">Save</button>
			</div>
		</div>
	</div>
</div>

{{template "signatures".}}

{{end}}